port: 4222
http: 8222

jetstream {
  store_dir: "/data/jetstream"
}

# Enable WebSocket for browser clients (Ground Control / nats.ws).
websocket {
  port: 8080
  no_tls: true
  # Dev-mode CORS: allow any origin.
  same_origin: false
  # [Optional] To restrict origins, uncomment the line below and list explicit URLs.
  # NATS does not accept wildcard "*".
  # allowed_origins: ["http://127.0.0.1:5173", "http://localhost:5173"]
}

# -------------------------------------------------------------------------
# TLS & Secure WebSocket Configuration (Commented Out)
# -------------------------------------------------------------------------
# To enable TLS and WSS, uncomment the blocks below and ensure certificates
# are available at the specified paths.
#
# 1. Main TCP Port (4222) - For Backend Services (Python/Go)
#    - Uses mTLS (Mutual TLS) for high security.
#    - Clients MUST provide a valid certificate signed by the CA.
#
# tls {
#     cert_file: "/config/certs/server.crt"
#     key_file:  "/config/certs/server.key"
#     ca_file:   "/config/certs/ca.crt"
#     verify:    true   # Enforce client certificate validation
#     timeout:   2
# }
#
# 2. WebSocket Port (9222) - For Browser Clients
#    - Uses Standard TLS (WSS).
#    - 'verify: false' allows browsers to connect without client certificates.
#    - Remember to update your frontend to use 'wss://' and port 9222.
#    - SECURITY NOTE: 'same_origin: false' is required for cross-domain access.
#      In production, ALWAYS set 'allowed_origins' to restrict access to your specific domains.
#
# websocket {
#     port: 9222
#     tls {
#         cert_file: "/config/certs/server.crt"
#         key_file:  "/config/certs/server.key"
#         verify: false  # Browsers typically don't use mTLS
#     }
#     no_tls: false
#     same_origin: false
#
#     # [Security Recommendation] Explicitly list your frontend domains below.
#     # NATS does not support wildcards (e.g., "*.example.com" is NOT valid).
#     # allowed_origins: [
#     #    "https://your-production-app.com",
#     #    "http://localhost:5173"
#     # ]
# }
